!GLOBAL

mixed-port: 7890
allow-lan: false
log-level: info
external-controller: 127.0.0.1:9090
mode: rule
ipv6: true

rule-providers:
  Bahamut-Site:
    type: http
    behavior: domain
    format: mrs
    url: https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/Bahamut/Bahamut-Site.mrs
    path: ./ruleset/Bahamut-Site.mrs
    interval: 86400
  Apple-Site:
    type: http
    behavior: domain
    format: mrs
    url: https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/Apple/Apple-Site.mrs
    path: ./ruleset/Apple-Site.mrs
    interval: 86400
  Apple-IP:
    type: http
    behavior: ipcidr
    format: mrs
    url: https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/Apple/Apple-IP.mrs
    path: ./ruleset/Apple-IP.mrs
    interval: 86400
  Bilibili-Site:
    type: http
    behavior: domain
    format: mrs
    url: https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/Bilibili/Bilibili-Site.mrs
    path: ./ruleset/Bilibili-Site.mrs
    interval: 86400
  Bilibili-IP:
    type: http
    behavior: ipcidr
    format: mrs
    url: https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/Bilibili/Bilibili-IP.mrs
    path: ./ruleset/Bilibili-IP.mrs
    interval: 86400
  China-Site:
    type: http
    behavior: domain
    format: mrs
    url: https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/China/China-Site.mrs
    path: ./ruleset/China-Site.mrs
    interval: 86400
  China-IP:
    type: http
    behavior: ipcidr
    format: mrs
    url: https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/China/China-IP.mrs
    path: ./ruleset/China-IP.mrs
    interval: 86400
  Discord-Site:
    type: http
    behavior: domain
    format: mrs
    url: https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/Discord/Discord-Site.mrs
    path: ./ruleset/Discord-Site.mrs
    interval: 86400
  GFWList-Site:
    type: http
    behavior: domain
    format: mrs
    url: https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/GFWList/GFWList-Site.mrs
    path: ./ruleset/GFWList-Site.mrs
    interval: 86400
  Google-Site:
    type: http
    behavior: domain
    format: mrs
    url: https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/Google/Google-Site.mrs
    path: ./ruleset/Google-Site.mrs
    interval: 86400
  Google-IP:
    type: http
    behavior: ipcidr
    format: mrs
    url: https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/Google/Google-IP.mrs
    path: ./ruleset/Google-IP.mrs
    interval: 86400
  GoogleFCM-Site:
    type: http
    behavior: domain
    format: mrs
    url: https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/GoogleFCM/GoogleFCM-Site.mrs
    path: ./ruleset/GoogleFCM-Site.mrs
    interval: 86400
  Local-IP:
    type: http
    behavior: ipcidr
    format: mrs
    url: https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/Local/Local-IP.mrs
    path: ./ruleset/Local-IP.mrs
    interval: 86400
  Microsoft-Site:
    type: http
    behavior: domain
    format: mrs
    url: https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/Microsoft/Microsoft-Site.mrs
    path: ./ruleset/Microsoft-Site.mrs
    interval: 86400
  Netflix-Site:
    type: http
    behavior: domain
    format: mrs
    url: https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/Netflix/Netflix-Site.mrs
    path: ./ruleset/Netflix-Site.mrs
    interval: 86400
  Netflix-IP:
    type: http
    behavior: ipcidr
    format: mrs
    url: https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/Netflix/Netflix-IP.mrs
    path: ./ruleset/Netflix-IP.mrs
    interval: 86400
  OpenAI-Site:
    type: http
    behavior: domain
    format: mrs
    url: https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/OpenAI/OpenAI-Site.mrs
    path: ./ruleset/OpenAI-Site.mrs
    interval: 86400
  OpenAI-IP:
    type: http
    behavior: ipcidr
    format: mrs
    url: https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/OpenAI/OpenAI-IP.mrs
    path: ./ruleset/OpenAI-IP.mrs
    interval: 86400
  Speedtest-Site:
    type: http
    behavior: domain
    format: mrs
    url: https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/Speedtest/Speedtest-Site.mrs
    path: ./ruleset/Speedtest-Site.mrs
    interval: 86400
  Spotify-Site:
    type: http
    behavior: domain
    format: mrs
    url: https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/Spotify/Spotify-Site.mrs
    path: ./ruleset/Spotify-Site.mrs
    interval: 86400
  Spotify-IP:
    type: http
    behavior: ipcidr
    format: mrs
    url: https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/Spotify/Spotify-IP.mrs
    path: ./ruleset/Spotify-IP.mrs
    interval: 86400
  Steam-Site:
    type: http
    behavior: domain
    format: mrs
    url: https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/Steam/Steam-Site.mrs
    path: ./ruleset/Steam-Site.mrs
    interval: 86400
  Telegram-Site:
    type: http
    behavior: domain
    format: mrs
    url: https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/Telegram/Telegram-Site.mrs
    path: ./ruleset/Telegram-Site.mrs
    interval: 86400
  Telegram-IP:
    type: http
    behavior: ipcidr
    format: mrs
    url: https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/Telegram/Telegram-IP.mrs
    path: ./ruleset/Telegram-IP.mrs
    interval: 86400
  TikTok-Site:
    type: http
    behavior: domain
    format: mrs
    url: https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/TikTok/TikTok-Site.mrs
    path: ./ruleset/TikTok-Site.mrs
    interval: 86400

rules:
  - AND,((DST-PORT,443),(NETWORK,UDP)),REJECT
  - DOMAIN,ntp.aliyun.com,DIRECT
  - DOMAIN,proxy.sakuraikaede.com,DIRECT
  - DOMAIN,converter-mitce.sakuraikaede.com,DIRECT
  - DOMAIN-KEYWORD,msftconnecttest.com,主代理
  - DOMAIN-KEYWORD,msftncsi.com,主代理
  - DOMAIN-KEYWORD,googleapis,Google
  - RULE-SET,Bahamut-Site,Bahamut
  - RULE-SET,Bilibili-Site,Bilibili
  - RULE-SET,Discord-Site,Discord
  - RULE-SET,GoogleFCM-Site,GoogleFCM
  - RULE-SET,Netflix-Site,Netflix
  - RULE-SET,OpenAI-Site,OpenAI
  - RULE-SET,Speedtest-Site,Speedtest
  - RULE-SET,Spotify-Site,Spotify
  - RULE-SET,Steam-Site,Steam
  - RULE-SET,Telegram-Site,Telegram
  - RULE-SET,TikTok-Site,TikTok
  - RULE-SET,Apple-Site,Apple
  - RULE-SET,Google-Site,Google
  - RULE-SET,Microsoft-Site,Microsoft
  - RULE-SET,GFWList-Site,黑名单网站
  - RULE-SET,China-Site,中国大陆网站
  - RULE-SET,Local-IP,DIRECT,no-resolve
  - RULE-SET,Bilibili-IP,Bilibili
  - RULE-SET,Netflix-IP,Netflix
  - RULE-SET,OpenAI-IP,OpenAI
  - RULE-SET,Spotify-IP,Spotify
  - RULE-SET,Telegram-IP,Telegram
  - RULE-SET,Apple-IP,Apple
  - RULE-SET,Google-IP,Google
  - RULE-SET,China-IP,中国大陆网站
  - MATCH,主代理
